<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokédex Tecnológica</title>
    <style>
        :root {
            --bg-primary: #121420;
            --bg-secondary: #1e2235;
            --text-primary: #e0e6ff;
            --accent-primary: #4ecdc4;
            --accent-secondary: #5d3fea;
            --border-color: rgba(78, 205, 196, 0.3);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            transition: all 0.3s ease;
        }

        body {
            font-family: 'Orbitron', 'Arial', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #0f1323 100%);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
            background: rgba(30, 34, 53, 0.6);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }

        #pokemon-list-section {
            width: 400px;
            background: rgba(26, 29, 46, 0.7);
            border-radius: 15px;
            padding: 20px;
            overflow-y: auto;
            max-height: 90vh;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            position: sticky;
            top: 20px;
        }

        #pokemon-detail-section {
            flex-grow: 1;
            background: rgba(26, 29, 46, 0.7);
            border-radius: 15px;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-color);
            position: sticky;
            top: 20px;
            height: 90vh;
            overflow-y: auto;
        }

        .pokemon-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            width: 100%;
        }

        .pokemon-grid-item {
            background: linear-gradient(145deg, rgba(78, 205, 196, 0.1), rgba(93, 63, 234, 0.1));
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .pokemon-grid-item:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
            border-color: var(--accent-primary);
        }

        .pokemon-grid-item img {
            max-width: 80px;
            max-height: 80px;
            filter: brightness(1.2) contrast(1.2);
        }

        .pokemon-grid-item p {
            color: var(--text-primary);
            margin-top: 10px;
            font-size: 0.8em;
            text-transform: capitalize;
        }

        #pokemonImage {
            max-width: 300px;
            filter: drop-shadow(0 0 20px rgba(78, 205, 196, 0.4));
            margin-bottom: 20px;
        }

        .pokemon-card {
            text-align: center;
            width: 100%;
            max-width: 500px;
        }

        .types {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .type {
            padding: 5px 10px;
            border-radius: 20px;
            color: white;
            font-size: 0.9em;
            text-transform: capitalize;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .base-stats {
            width: 100%;
            margin-top: 20px;
            background: rgba(30, 34, 53, 0.5);
            border-radius: 10px;
            padding: 15px;
        }

        .stat {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .stat-label {
            width: 120px;
            text-transform: capitalize;
            color: var(--accent-primary);
        }

        .stat-bar-container {
            flex-grow: 1;
            height: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 7px;
            overflow: hidden;
        }

        .stat-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 7px;
        }

        .stat-value {
            margin-left: 10px;
            min-width: 40px;
            text-align: right;
            color: var(--text-primary);
        }

        .base-stats h3 {
            color: var(--accent-primary);
            margin-bottom: 10px;
            text-align: center;
        }

        #pokemonName {
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-size: 2em;
            margin-bottom: 10px;
        }

        #pokemonId {
            color: var(--accent-primary);
            font-family: 'Roboto Mono', monospace;
            opacity: 0.7;
        }

        /* New styles for search bar */
        .search-container {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }

        #searchInput {
            width: 100%;
            max-width: 400px;
            padding: 10px 15px;
            background: rgba(30, 34, 53, 0.7);
            border: 1px solid var(--border-color);
            border-radius: 25px;
            color: var(--text-primary);
            font-family: 'Orbitron', 'Arial', sans-serif;
            font-size: 1em;
            outline: none;
            transition: all 0.3s ease;
        }

        #searchInput:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 15px rgba(78, 205, 196, 0.3);
        }

        .pokemon-grid-item.hidden {
            display: none;
        }

        /* Type colors remain the same */
        .type-normal {
            background-color: #A8A878;
        }

        .type-fire {
            background-color: #F08030;
        }

        .type-water {
            background-color: #6890F0;
        }

        .type-electric {
            background-color: #F8D030;
        }

        .type-grass {
            background-color: #78C850;
        }

        .type-ice {
            background-color: #98D8D8;
        }

        .type-fighting {
            background-color: #C03028;
        }

        .type-poison {
            background-color: #A040A0;
        }

        .type-ground {
            background-color: #E0C068;
        }

        .type-flying {
            background-color: #A890F0;
        }

        .type-psychic {
            background-color: #F85888;
        }

        .type-bug {
            background-color: #A8B820;
        }

        .type-rock {
            background-color: #B8A038;
        }

        .type-ghost {
            background-color: #705898;
        }

        .type-dragon {
            background-color: #7038F8;
        }

        .type-dark {
            background-color: #705848;
        }

        .type-steel {
            background-color: #B8B8D0;
        }

        .type-fairy {
            background-color: #EE99AC;
        }
    </style>
</head>

<body>
    <div class="app-container">
        <div id="pokemon-list-section">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Buscar Pokémon por nombre o número">
            </div>
            <div id="pokemonGrid" class="pokemon-grid">
                <!-- Pokemon grid items will be dynamically populated here -->
            </div>
        </div>

        <div id="pokemon-detail-section">
            <div id="pokemonCard" class="pokemon-card">
                <img id="pokemonImage" src="" alt="Pokemon Image">
                <h2 id="pokemonName"></h2>
                <p id="pokemonId"></p>
                <div id="pokemonTypes" class="types"></div>

                <div class="stats">
                    <p>Altura: <span id="pokemonHeight"></span></p>
                    <p>Peso: <span id="pokemonWeight"></span></p>
                </div>

                <div class="base-stats">
                    <h3>Estadísticas Base:</h3>
                    <div id="pokemonStats"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        const TOTAL_POKEMON = 1025; // Actualizado para incluir más Pokémon
        const pokemonGrid = document.getElementById('pokemonGrid');
        const searchInput = document.getElementById('searchInput');

        // DOM elements for pokemon details
        const pokemonImage = document.getElementById('pokemonImage');
        const pokemonName = document.getElementById('pokemonName');
        const pokemonId = document.getElementById('pokemonId');
        const pokemonTypes = document.getElementById('pokemonTypes');
        const pokemonHeight = document.getElementById('pokemonHeight');
        const pokemonWeight = document.getElementById('pokemonWeight');
        const pokemonStats = document.getElementById('pokemonStats');

        // Cached Pokemon data to enable searching
        const pokemonCache = {};

        // Fetch Pokemon data
        async function fetchPokemonData(identifier) {
            try {
                const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${identifier}`);
                if (!response.ok) {
                    throw new Error('Pokemon no encontrado');
                }
                return await response.json();
            } catch (error) {
                console.error('Error:', error);
                return null;
            }
        }

        // Display Pokemon types
        function displayPokemonTypes(types) {
            pokemonTypes.innerHTML = '';
            types.forEach(typeInfo => {
                const typeElement = document.createElement('span');
                typeElement.classList.add('type', `type-${typeInfo.type.name}`);
                typeElement.textContent = typeInfo.type.name;
                pokemonTypes.appendChild(typeElement);
            });
        }

        // Display Pokemon stats
        function displayPokemonStats(stats) {
            pokemonStats.innerHTML = '';
            stats.forEach(statInfo => {
                const statName = statInfo.stat.name;
                const statValue = statInfo.base_stat;

                const statElement = document.createElement('div');
                statElement.classList.add('stat');

                const statLabel = document.createElement('span');
                statLabel.classList.add('stat-label');
                statLabel.textContent = statName;

                const statBarContainer = document.createElement('div');
                statBarContainer.classList.add('stat-bar-container');

                const statBar = document.createElement('div');
                statBar.classList.add('stat-bar');
                statBar.style.width = `${Math.min(statValue, 255) / 2.55}%`;

                const statValue_ = document.createElement('span');
                statValue_.classList.add('stat-value');
                statValue_.textContent = statValue;

                statBarContainer.appendChild(statBar);

                statElement.appendChild(statLabel);
                statElement.appendChild(statBarContainer);
                statElement.appendChild(statValue_);

                pokemonStats.appendChild(statElement);
            });
        }

        // Display Pokemon details
        function displayPokemonDetails(pokemonData) {
            pokemonImage.src = pokemonData.sprites.front_default || pokemonData.sprites.other['official-artwork'].front_default;
            pokemonName.textContent = pokemonData.name;
            pokemonId.textContent = `#${pokemonData.id.toString().padStart(3, '0')}`;
            pokemonHeight.textContent = `${pokemonData.height / 10} m`;
            pokemonWeight.textContent = `${pokemonData.weight / 10} kg`;

            displayPokemonTypes(pokemonData.types);
            displayPokemonStats(pokemonData.stats);
        }

        // Populate Pokemon Grid
        async function populatePokemonGrid() {
            pokemonGrid.innerHTML = ''; // Limpiar la cuadrícula antes de rellenarla

            const startIndex = 1; // Siempre empieza desde el primer Pokémon
            const endIndex = TOTAL_POKEMON; // Aseguramos que incluya todos los Pokémon

            for (let i = startIndex; i <= endIndex; i++) {
                try {
                    const pokemonData = await fetchPokemonData(i);

                    // Guardar datos en caché
                    pokemonCache[pokemonData.name] = pokemonData;
                    pokemonCache[pokemonData.id] = pokemonData;

                    // Crear el elemento de la cuadrícula
                    const gridItem = document.createElement('div');
                    gridItem.classList.add('pokemon-grid-item');
                    gridItem.dataset.name = pokemonData.name;
                    gridItem.dataset.id = pokemonData.id;

                    const img = document.createElement('img');
                    img.src = pokemonData.sprites.front_default;
                    img.alt = pokemonData.name;

                    const name = document.createElement('p');
                    name.textContent = `${pokemonData.name} #${pokemonData.id.toString().padStart(3, '0')}`;

                    gridItem.appendChild(img);
                    gridItem.appendChild(name);

                    // Añadir evento para mostrar detalles
                    gridItem.addEventListener('click', () => {
                        displayPokemonDetails(pokemonData);
                    });

                    pokemonGrid.appendChild(gridItem);
                } catch (error) {
                    console.error(`Error fetching Pokémon ${i}:`, error);
                }
            }
        }

        // Search functionality
        function searchPokemon() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const gridItems = document.querySelectorAll('.pokemon-grid-item');

            gridItems.forEach(item => {
                const name = item.dataset.name;
                const id = item.dataset.id;

                if (searchTerm === '' ||
                    name.includes(searchTerm) ||
                    id.toString().includes(searchTerm)) {
                    item.classList.remove('hidden');
                } else {
                    item.classList.add('hidden');
                }
            });
        }

        // Add event listener for search input
        searchInput.addEventListener('input', searchPokemon);

        // Cargar la cuadrícula inicial de Pokémon
        populatePokemonGrid();

        // Cargar el primer Pokémon por defecto en los detalles
        fetchPokemonData(1).then(pokemonData => {
            if (pokemonData) {
                displayPokemonDetails(pokemonData);
            }
        });
    </script>
</body>

</html>